{% extends 'AppBundle::base.html.twig' %}

{% block admin %}
    <br>
    <br>
    <br>
    <br>
    {% if integration is defined %}
        <div class="row">
            <div class="col-md-12 col-xs-12" style="padding-left: 0px;">
                <div class="x_panel">
                    <div class="x_title">
                        <h2>Integration d'un personnel etape finale

                        </h2>
                        <ul class="nav navbar-right panel_toolbox">
                            <li><a class="collapse-link"><i class="fa fa-chevron-up"></i></a>
                            </li>
                        </ul>
                        <div class="clearfix"></div>
                    </div>
                    <div class="x_content">
                        <br/>
                        <form class="form-horizontal form-label-left" action="{{ path('create_one_integration') }}"
                              method="post">
                            <div class="form-group">
                                <label class="control-label col-md-3 col-sm-3 col-xs-12">Personnel</label>
                                <div class="col-md-9 col-sm-9 col-xs-12">
                                    <select class="form-control" required disabled="disabled" id="userId">
                                        {% for value in employers %}
                                            <option value="{{ value.id }}">{{ value.nom~' '~value.prenom }}</option>
                                        {% endfor %}
                                    </select>
                                </div>
                            </div>
                            {% for value in employers %}
                                <div class="form-group">
                                    <label class="control-label col-md-3 col-sm-3 col-xs-12">Date de naissance</label>
                                    <div class="col-md-9 col-sm-9 col-xs-12">
                                        <input type="text" name="employerDateNaissance"
                                               class="form-control has-feedback-left"
                                               value="{{ value.dateNaissance }}" id="single_cal1"
                                               placeholder="Date de naissance" aria-describedby="inputSuccess2Status"
                                               disabled="disabled">
                                        <span class="fa fa-calendar-o form-control-feedback left"
                                              aria-hidden="true"></span>
                                        <span id="inputSuccess2Status" class="sr-only">(success)</span>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label class="control-label col-md-3 col-sm-3 col-xs-12">Lieu de naissance</label>
                                    <div class="col-md-9 col-sm-9 col-xs-12">
                                        <input type="text" class="form-control" value="{{ value.lieuNaissance }}"
                                               name="employerLieuNaissance"
                                               placeholder="Lieu de naissance" required disabled="disabled">
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label class="control-label col-md-3 col-sm-3 col-xs-12">CIN</label>
                                    <div class="col-md-9 col-sm-9 col-xs-12">
                                        <input type="text" class="form-control" id="employerCinNew"
                                               value="{{ value.cin }}" maxlength="12"
                                               name="employerCin"
                                               placeholder="CIN" required disabled="disabled">
                                        <span style="color: red;" id="msgCin">Cin doit etre des conbinnaison de 12 chiffre et ne peut pas contenir une letre.</span>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label class="control-label col-md-3 col-sm-3 col-xs-12">Sexe</label>
                                    <div class="col-md-9 col-sm-9 col-xs-12">
                                        <select class="form-control" name="employerSexe" required disabled="disabled">
                                            <option value="{{ value.sexe }}">{{ value.sexe }}</option>
                                        </select>
                                    </div>
                                </div>
                            {% endfor %}

                            <div class="form-group">
                                <label class="control-label col-md-3 col-sm-3 col-xs-12">Contact</label>
                                <div class="col-md-9 col-sm-9 col-xs-12">
                                    <input type="text" class="form-control"
                                           name="integrationContact"
                                           placeholder="Contact" required id="contact" maxlength="10">
                                    <span style="color: red;" id="msgContact">Contact doit etre des conbinnaison de 10 chiffre et ne peut pas contenir une letre.</span>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="control-label col-md-3 col-sm-3 col-xs-12">Corp</label>
                                <div class="col-md-9 col-sm-9 col-xs-12">
                                    <input type="text" class="form-control"
                                           name="integrationCorp"
                                           placeholder="Corp" required>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="control-label col-md-3 col-sm-3 col-xs-12">Post Cadre</label>
                                <div class="col-md-9 col-sm-9 col-xs-12">
                                    <input type="text" class="form-control"
                                           name="integrationPostCadre"
                                           placeholder="Post Cadre" required>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="control-label col-md-3 col-sm-3 col-xs-12">Date d'integration</label>
                                <div class="col-md-9 col-sm-9 col-xs-12">
                                    <input type="text" name="integrationDateIntegration"
                                           class="form-control has-feedback-left"
                                           id="single_cal2"
                                           placeholder="Date d'integration" aria-describedby="inputSuccess2Status2">
                                    <span class="fa fa-calendar-o form-control-feedback left"
                                          aria-hidden="true"></span>
                                    <span id="inputSuccess2Status" class="sr-only">(success)</span>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="control-label col-md-3 col-sm-3 col-xs-12">Lieu d'Integration'</label>
                                <div class="col-md-9 col-sm-9 col-xs-12">
                                    <input type="text" class="form-control"
                                           name="integrationLieuIntegration"
                                           placeholder="Lieu d'Integration'" required>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="control-label col-md-3 col-sm-3 col-xs-12">Cas Particulier</label>
                                <div class="col-md-9 col-sm-9 col-xs-12">
                                    <input type="text" class="form-control"
                                           name="integrationCasParticulier"
                                           placeholder="Cas Particulier" required>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="control-label col-md-3 col-sm-3 col-xs-12">Date d'Arret
                                    d'Integration</label>
                                <div class="col-md-9 col-sm-9 col-xs-12">
                                    <input type="text" name="integrationDateArretIntegration"
                                           class="form-control has-feedback-left"
                                           id="single_cal4"
                                           placeholder="Date d'Arret d'Integration"
                                           aria-describedby="inputSuccess2Status4">
                                    <span class="fa fa-calendar-o form-control-feedback left"
                                          aria-hidden="true"></span>
                                    <span id="inputSuccess2Status" class="sr-only">(success)</span>
                                </div>
                            </div>
                            <div class="form-group">
                                <div class="col-md-9 col-sm-9 col-xs-12">
                                    <input type="text" id="employerId" class="form-control"
                                           name="employerId"
                                           placeholder="Cas Particulier" required>
                                </div>
                            </div>
                            <div class="ln_solid"></div>
                            <div class="form-group">
                                <div class="col-md-9 col-sm-9 col-xs-12 col-md-offset-3">
                                    <button type="submit" class="btn btn-primary">Ajouter</button>
                                </div>
                            </div>

                        </form>
                    </div>
                </div>
            </div>
        </div>
    {% else %}
        <center>
            <div class="row">
                <div class="col-md-12 col-xs-12" style="padding-left: 0px;">
                    <div class="x_panel">
                        <div class="x_title">
                            <h2>Integration d'un personnel etape 1

                            </h2>
                            <ul class="nav navbar-right panel_toolbox">
                                <li><a class="collapse-link"><i class="fa fa-chevron-up"></i></a>
                                </li>
                            </ul>
                            <div class="clearfix"></div>
                        </div>
                        <div class="x_content">
                            <br/>
                            <form class="form-horizontal form-label-left" action="{{ path('debut_integration') }}"
                                  method="post" style="box-shadow: 0px 0px 10px;padding: 30px;width: 900px;">
                                <div class="form-group">
                                    <label class="control-label col-md-3 col-sm-3 col-xs-12">Personnel</label>
                                    <div class="col-md-9 col-sm-9 col-xs-12">
                                        <select class="form-control" name="id" required>
                                            {% for value in employers %}
                                                <option value="{{ value.id }}">{{ value.nom~' '~value.prenom }}</option>
                                            {% endfor %}
                                        </select>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <div class="col-md-9 col-sm-9 col-xs-12 col-md-offset-3">
                                        <button type="submit" class="btn btn-primary">Commencer l'integration</button>
                                    </div>
                                </div>

                            </form>
                        </div>
                    </div>
                </div>
            </div>

        </center>
        <div class="x_content">
            <p class="text-muted font-13 m-b-30">
                List des integrations faite par les personnels
            </p>

            <a href="{{ path('xel') }}" class="btn btn-success"
               style="float:right;margin-right:10px;"><i class="fa fa-building-o"></i> Expoter en exel</a>

            <table id="datatable" class="table table-striped table-bordered">
                <thead>
                <tr>
                    <th>Nom et prenom</th>
                    <th>Contacts</th>
                    <th>Corps</th>
                    <th>Post cadre</th>
                    <th>Date d'integration</th>
                    <th>Lieu</th>
                    <th>Cas particulier</th>
                    <th>Date d'arret d'integration</th>

                </tr>
                </thead>

                <tbody>
                {% for inter in integrationList %}
                    <tr>
                        {% for employer in employers %}
                            {% if employer.id == inter.employerId %}
                                <td>{{ employer.nom~' '~employer.prenom }}</td>
                            {% endif %}
                        {% endfor %}
                        <td>{{ inter.contact }}</td>
                        <td>{{ inter.corp }}</td>
                        <td>{{ inter.postCadre }}</td>
                        <td>{{ inter.dateIntegration }}</td>
                        <td>{{ inter.lieuIntegration }}</td>
                        <td>{{ inter.casParticulier }}</td>
                        <td>{{ inter.dateArret }}</td>

                    </tr>
                {% endfor %}
                </tbody>
            </table>
        </div>
    {% endif %}

{% endblock %}